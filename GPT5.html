<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
<meta name="format-detection" content="telephone=no" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="theme-color" content="#38bdf8" />
<title>成都-南宁-桂林-阳朔6日之旅 | 广西深度游</title>
<meta name="description" content="简约大气的广西旅行方案：可直接执行的日程与时刻、可视化地图、国庆参考气候、酒店与美食清单。" />
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
<style>
  /* 重置与触摸优化（参考 Claude4） */
  *{margin:0;padding:0;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box}
  *{-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
  /* 允许选择的正文元素 */
  p, span, .it-body, .rec, .rec-item{ -webkit-user-select:text; -khtml-user-select:text; -moz-user-select:text; -ms-user-select:text; user-select:text }
  :root{
    --text: #0f1115;
    --sub: #64748b;
    --bg: #f7f8fa;
    --card: #ffffff;
    --line: #e5e7eb;
    --accent: #38bdf8;
    --accent-weak: #e0f2fe;
    --ok: #10b981;
    --warn: #f59e0b;
    --danger: #ef4444;
    --shadow: 0 8px 30px rgba(15,17,21,.06);
    --radius: 16px;
    /* 兼容 Claude4 变量命名 */
    --primary: #2563eb;
    --primary-light: #dbeafe;
    --secondary: #64748b;
    --border: #e2e8f0;
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
  }
  html,body{
    margin:0; padding:0;
    background:linear-gradient(135deg, #60a5fa 0%, #38bdf8 100%);
    color:var(--text);
    font-family:-apple-system,BlinkMacSystemFont,"SF Pro Text","Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans CJK SC",sans-serif;
    -webkit-font-smoothing:antialiased
  }
  html{scroll-behavior:smooth}
  [id]{scroll-margin-top:90px}
  body{font-size:17px;line-height:1.75}
  a{color:var(--accent);text-decoration:none}
  .container{max-width:1100px;margin:0 auto;padding:0 22px}
  /* 顶部导航（对齐 Claude4 风格） */
  .navbar{position:sticky;position:-webkit-sticky;top:0;z-index:1000;background:rgba(255,255,255,.95);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-bottom:1px solid var(--border);box-shadow:var(--shadow-sm)}
  .nav-content{max-width:1100px;margin:0 auto;padding:14px 22px;display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap}
  .brand{display:flex;align-items:center;gap:10px;font-weight:800;letter-spacing:-.01em;color:var(--accent);white-space:nowrap;cursor:pointer;font-size:20px}
  .brand i{font-size:22px;color:var(--accent)}
  .nav-links{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
  .nav-links a, .nav-links button{color:#0f172a;padding:8px 12px;border-radius:10px;border:1px solid transparent;transition:all .2s;background:#fff;display:flex;align-items:center;gap:6px;cursor:pointer}
  .nav-links a:hover, .nav-links button:hover{background:var(--accent-weak);color:#0f172a;border-color:var(--line);transform:translateY(-1px)}
  .nav-links a.active{background:var(--accent);color:#fff;border-color:var(--accent)}
  .hero{padding:36px 0 18px}
  .hero-card{background:rgba(255,255,255,0.98);backdrop-filter:blur(16px);border:1px solid rgba(255,255,255,0.7);border-radius:var(--radius);padding:32px 26px;box-shadow:var(--shadow-lg);position:relative;overflow:hidden}
  .hero-card::before{content:'';position:absolute;left:0;right:0;top:0;height:5px;background:linear-gradient(90deg, var(--accent), #60a5fa, #8b5cf6);border-top-left-radius:var(--radius);border-top-right-radius:var(--radius)}
  .hero h1{margin:0;font-size:34px;line-height:1.25;letter-spacing:-.02em;background:linear-gradient(135deg, var(--accent), #8b5cf6);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}
  .hero-sub{margin:8px 0 0;color:var(--sub)}
  .cta{display:flex;gap:12px;flex-wrap:wrap;margin-top:16px}
  .btn{appearance:none;border:1px solid var(--line);background:#fff;color:#0f1115;padding:10px 14px;border-radius:12px;font-weight:600;cursor:pointer}
  .btn.primary{background:#0f1115;color:#fff;border-color:#0f1115}
  .btn.accent{background:var(--accent);border-color:var(--accent);color:#fff}
  .note{font-size:13px;color:var(--sub)}
  main{padding:26px 0 70px}
  section+section{margin-top:26px}
  .card{background:rgba(255,255,255,0.98);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,0.7);border-radius:var(--radius);box-shadow:0 10px 15px -3px rgba(0,0,0,.1);padding:26px;transition:transform .2s, box-shadow .2s}
  .card:hover{transform:translateY(-2px);box-shadow:0 14px 24px -6px rgba(0,0,0,.15)}
  h2{margin:0 0 16px;font-size:24px;letter-spacing:-.01em;display:flex;align-items:center;gap:12px}
  h2::before{content:'';width:8px;height:24px;border-radius:6px;background:linear-gradient(135deg, var(--accent), #60a5fa)}
  .list{margin:10px 0 0;padding-left:22px}
  .hr{height:1px;background:var(--line);margin:16px 0}
  details{border:1px solid var(--line);border-radius:12px;background:#fff;overflow:hidden}
  details summary{cursor:pointer;padding:14px 16px;font-weight:600;list-style:none}
  details[open] summary{border-bottom:1px solid var(--line)}
  details .content{padding:14px 16px}
  details+details{margin-top:12px}
  /* day timeline (Claude4) */
  .day-section{margin-bottom:28px;position:relative}
  .day-header{display:flex;align-items:center;gap:16px;margin-bottom:14px;padding:18px;border-left:6px solid var(--accent);background:linear-gradient(135deg, var(--accent-weak), rgba(255,255,255,.9));border-radius:12px;box-shadow:var(--shadow-sm)}
  .day-badge{width:44px;height:44px;border-radius:50%;background:var(--accent);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:800}
  .day-info h3{margin:0 0 6px;font-size:18px}
  .day-info p{margin:0;color:var(--sub)}
  .day-timeline{margin-left:36px;position:relative}
  .day-timeline::before{content:'';position:absolute;left:-18px;top:0;bottom:0;width:4px;background:linear-gradient(to bottom, var(--accent), var(--accent-weak));border-radius:2px}
  .timeline-item{display:flex;gap:16px;align-items:flex-start;background:#fff;border:1px solid var(--line);border-radius:12px;box-shadow:var(--shadow-sm);padding:16px;margin-bottom:12px;position:relative}
  .timeline-item::before{content:'';position:absolute;left:-26px;top:20px;width:14px;height:14px;border-radius:50%;background:var(--accent);border:4px solid #fff;box-shadow:0 0 0 2px var(--accent-weak)}
  .timeline-time{font-weight:800;color:var(--accent);min-width:84px}
  .timeline-content{flex:1}
  .timeline-title{font-weight:700;color:#111;margin-bottom:6px}
  .timeline-desc{color:var(--sub)}
  .timeline-badges{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
  .badge{display:inline-block;padding:4px 10px;border-radius:999px;background:var(--accent-weak);color:#1e293b;border:1px solid var(--line);font-size:12px}
  .badge.price{background:#fef3c7;color:#92400e;border-color:#fde68a}
  .badge.time{background:#dcfce7;color:#166534;border-color:#bbf7d0}
  .food-recommendations{margin-top:10px;padding:10px;background:#f8fafc;border:1px solid var(--line);border-left:4px solid var(--ok);border-radius:10px}
  .food-item{padding:8px 10px;margin-bottom:8px;background:#fff;border:1px solid var(--line);border-radius:10px}
  .food-item:last-child{margin-bottom:0}
  /* itinerary timeline */
  .timeline{position:relative;margin-left:10px;padding-left:16px}
  .timeline:before{content:'';position:absolute;left:0;top:0;bottom:0;width:4px;background:linear-gradient(to bottom, var(--accent), var(--accent-weak));border-radius:2px}
  .it{position:relative;display:flex;gap:12px;align-items:flex-start;background:#fff;border:1px solid var(--line);border-radius:12px;padding:14px 16px;margin:12px 0;box-shadow:var(--shadow);transition:transform .2s, box-shadow .2s}
  .it:hover{transform:translateX(8px);box-shadow:0 10px 20px rgba(0,0,0,.08)}
  .it:before{content:'';position:absolute;left:-18px;top:22px;width:14px;height:14px;border-radius:50%;background:var(--accent);border:4px solid #fff;box-shadow:0 0 0 2px var(--accent-weak)}
  .it-time{font-weight:700;color:#111;min-width:72px}
  .it-body{flex:1}
  .it-title{font-weight:600;color:#111;margin-bottom:6px}
  .chips{display:flex;gap:8px;flex-wrap:wrap;margin-top:6px}
  .chip{display:inline-flex;align-items:center;gap:6px;padding:3px 8px;border-radius:999px;border:1px solid var(--line);background:#fafafa;font-size:12px;color:#374151}
  .chip.time{background:#eef2ff;border-color:#e5e7eb;color:#1e3a8a}
  .chip.dur{background:#ecfeff;border-color:#e5e7eb;color:#155e75}
  .chip.price{background:#fef3c7;border-color:#e5e7eb;color:#92400e}
  .chip.dist{background:#e0f2fe;border-color:#e5e7eb;color:#075985}
  .chip.trans{background:#f1f5f9;border-color:#e5e7eb;color:#0f172a}
  .chip.wx{background:#e0f2fe;border-color:#bae6fd;color:#075985}
  .it-wx{background:linear-gradient(135deg, #f0f9ff, #ffffff);}
  .rec{margin-top:8px;padding:10px;border:1px dashed var(--line);border-radius:10px;background:#fcfcfd}
  .rec-item{margin:6px 0}
  .rec-item b{color:#0f172a}
  .badge{display:inline-block;padding:2px 8px;border-radius:999px;background:var(--accent-weak);color:#1e293b;border:1px solid var(--line);font-size:12px}
  .pill{display:inline-block;padding:4px 10px;border-radius:999px;background:#fff;border:1px solid var(--line);font-size:12px;color:#111}
  .grid{display:grid;grid-template-columns:1fr;gap:16px}
  .table{width:100%;border-collapse:separate;border-spacing:0 10px}
  .table td,.table th{padding:12px 14px;background:#fff;border:1px solid var(--line)}
  .table th{background:#fbfbfc;text-align:left}
  /* map */
  .map-wrapper{position:relative;height:440px;border-radius:16px;overflow:hidden;box-shadow:0 10px 20px rgba(0,0,0,.12);border:1px solid var(--line)}
  #map{width:100%;height:100%}
  .leaflet-container{border-radius:16px;touch-action:pan-y pinch-zoom;}
  .map-overlay{position:absolute;top:14px;right:14px;left:auto;z-index:1001;display:flex;flex-direction:column;gap:10px;pointer-events:none;max-width:calc(100% - 28px)}
  .map-control{background:rgba(255,255,255,0.95);backdrop-filter:blur(10px);padding:8px 12px;border-radius:14px;border:1px solid var(--line);display:inline-flex;align-items:center;gap:8px;box-shadow:var(--shadow);font-size:13px;pointer-events:auto;white-space:nowrap;line-height:1}
  .map-control input{width:16px;height:16px}
  /* animations */
  .fade-in-up{opacity:0;transform:translateY(18px);transition:all .6s ease}
  .fade-in-up.in{opacity:1;transform:translateY(0)}
  /* table wrap for responsive */
  .table-wrap{width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch}
  .table-wrap::-webkit-scrollbar{display:none}
  /* mobile */
  @media (max-width: 768px){
    body{font-size:16px;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}
    .nav-content{padding:10px 12px;flex-direction:column;gap:8px}
    .brand{font-size:18px;justify-content:center;margin-bottom:4px}
    .nav-links{gap:8px;justify-content:center}
    .nav-links a, .nav-links button{min-height:44px}
    .hero{padding:28px 0 12px}
    .hero h1{font-size:28px}
    .map-wrapper{height:360px}
    .map-overlay{top:auto;bottom:10px;left:10px;right:auto;flex-direction:row;gap:8px;max-width:calc(100% - 20px)}
    .map-control{padding:6px 8px;font-size:12px}
    details summary{padding:12px 14px}
    details .content{padding:12px 14px}
    .it-time{min-width:64px}
    .table-wrap .table{min-width:640px}
    .table-wrap .table td, .table-wrap .table th{white-space:nowrap}
    /* 行程序号与卡片在H5的优化 */
    .day-header{padding:14px;gap:12px}
    .day-badge{width:36px;height:36px;font-size:16px;flex-shrink:0}
    .day-info h3{font-size:16px}
    .day-info p{font-size:13px}
    .day-timeline{margin-left:22px}
    .day-timeline::before{left:-12px}
    .timeline-item{padding:12px;gap:10px}
    .timeline-item::before{left:-18px;top:18px;width:12px;height:12px}
    .timeline-time{min-width:auto;font-size:14px}
    .timeline-title{font-size:15px}
    .timeline-desc{font-size:13px;line-height:1.55}
    .timeline-badges{gap:6px}
    .food-recommendations{padding:8px}
    .food-item{padding:8px;border-radius:12px}
    /* 美食推荐在H5改为单列卡片，避免拥挤 */
    .food-recommendations{display:grid;grid-template-columns:1fr;gap:10px}
    .food-item small{display:block;margin-top:4px}
  }
  /* modal */
  .overlay{position:fixed;inset:0;background:rgba(0,0,0,.35);display:none;align-items:center;justify-content:center;z-index:10000}
  .modal{width:min(560px,92vw);background:#fff;border-radius:16px;border:1px solid var(--line);box-shadow:var(--shadow)}
  .modal-h{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--line)}
  .modal-b{padding:16px}
  .modal-f{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end;padding:14px 16px;border-top:1px solid var(--line)}
  .qr{display:flex;gap:14px;align-items:center}
  .qr img{width:164px;height:164px;border-radius:12px;border:1px solid var(--line)}
  .toast{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:#111;color:#fff;padding:10px 14px;border-radius:999px;font-size:14px;opacity:0;pointer-events:none;transition:opacity .25s;z-index:1050}
  .toast.show{opacity:1}
</style>
</head>
<body>
  <div class="navbar">
    <div class="nav-content">
      <div class="brand" id="brandTop"><i class="fa-solid fa-route"></i> 广西国庆游</div>
      <div class="nav-links">
        <a href="#mapsec"><i class="fa-solid fa-map"></i> 地图</a>
        <a href="#plan"><i class="fa-solid fa-list"></i> 行程</a>
      </div>
    </div>
  </div>

  <header class="hero">
    <div class="container">
      <div class="hero-card fade-in-up" id="heroCard">
        <h1>广西 6 日行｜南宁 · 东兴 · 桂林 · 阳朔</h1>
      </div>
    </div>
  </header>

  <main class="container">
    <section id="mapsec" class="card fade-in-up">
      <h2>可视化地图</h2>
      <div class="map-wrapper">
        <div id="map"></div>
        <div class="map-overlay">
          <label class="map-control"><input type="checkbox" id="filterTraffic" checked> 交通</label>
          <label class="map-control"><input type="checkbox" id="filterSight" checked> 景点</label>
          <label class="map-control"><input type="checkbox" id="filterFood" checked> 美食</label>
          <label class="map-control"><input type="checkbox" id="filterStay" checked> 住宿</label>
        </div>
      </div>
      <details style="margin-top:10px">
        <summary>导入自定义POI（每行：名称,纬度,经度,类别）</summary>
        <div class="content">
          <textarea id="poiInput" style="width:100%;height:100px;border:1px solid var(--line);border-radius:8px"></textarea>
          <div class="cta" style="margin-top:8px">
            <button class="btn" onclick="importPOI()">导入并落点</button>
            <span class="note">类别仅支持：交通/景点/美食/住宿</span>
          </div>
        </div>
      </details>
      <div class="note" style="margin-top:6px">地图使用 Leaflet+OpenStreetMap，无需登录或授权。点位来自高德POI坐标与推荐清单。</div>
    </section>

    <section id="plan" class="card fade-in-up">
      <h2>精选行程安排</h2>
      <div class="hr"></div>
      <div id="itinerary-6" class="timeline">
        <div class="day-section">
          <div class="day-header">
            <div class="day-badge">1</div>
            <div class="day-info">
              <h3>成都→南宁（10月2日）</h3>
              <p>初探绿城风情，感受壮乡文化 | 南宁天气：多云 27-35℃</p>
            </div>
          </div>
          <div class="day-timeline">
            <div class="timeline-item">
              <div class="timeline-time">12:15</div>
              <div class="timeline-content">
                <div class="timeline-title">成都天府机场 → 南宁吴圩机场</div>
                <div class="timeline-desc">航班：GX8966 12:15起飞 → 14:00抵达 | 飞行约1小时45分 | 票价：¥690/人</div>
                <div class="timeline-badges"><span class="badge time">1小时45分</span><span class="badge price">¥690×2</span></div>
              </div>
            </div>
            <div class="timeline-item">
              <div class="timeline-time">15:00</div>
              <div class="timeline-content">
                <div class="timeline-title">机场大巴入城 + 办理入住</div>
                <div class="timeline-desc">大巴约45分到市区，入住：亚朵酒店（南宁万象城店） | ¥400-500/晚</div>
                <div class="timeline-badges"><span class="badge time">1小时</span><span class="badge price">¥50（2人交通）</span></div>
              </div>
            </div>
            <div class="timeline-item">
              <div class="timeline-time">16:00</div>
              <div class="timeline-content">
                <div class="timeline-title">南宁小吃体验</div>
                <div class="timeline-desc">轻松品尝本地特色</div>
                <div class="food-recommendations">
                  <div class="food-item"><strong>舒记老友粉</strong> - 共和路35号 | 人均¥18-30 | 7:00-22:00</div>
                  <div class="food-item"><strong>粉虫</strong> - 建政路菜市场 | 人均¥12-20 | 6:00-14:00</div>
                  <div class="food-item"><strong>生榨米粉</strong> - 朝阳路 | 人均¥15-25 | 7:00-15:00</div>
                </div>
                <div class="timeline-badges"><span class="badge time">1小时</span><span class="badge price">¥50-75（2人）</span></div>
              </div>
            </div>
            <div class="timeline-item">
              <div class="timeline-time">17:30</div>
              <div class="timeline-content">
                <div class="timeline-title">万象城休闲购物</div>
                <div class="timeline-desc">酒店附近逛街适应环境</div>
                <div class="timeline-badges"><span class="badge time">1.5小时</span><span class="badge price">自由消费</span></div>
              </div>
            </div>
            <div class="timeline-item">
              <div class="timeline-time">19:30</div>
              <div class="timeline-content">
                <div class="timeline-title">中山路美食街晚餐</div>
                <div class="timeline-desc">老友粉、柠檬鸭、卷筒粉、白切鸡</div>
                <div class="food-recommendations">
                  <div class="food-item"><strong>复记老友粉</strong> - 中山路49号 | 人均¥15-25 | 6:00-24:00</div>
                  <div class="food-item"><strong>阿香柠檬鸭</strong> - 中山路 | 人均¥35-50 | 11:00-22:00</div>
                  <div class="food-item"><strong>卷筒粉</strong> - 中山路夜市 | 人均¥8-15 | 18:00-24:00</div>
                  <div class="food-item"><strong>白切鸡</strong> - 中山路 | 人均¥25-40 | 17:00-23:00</div>
                </div>
                <div class="timeline-badges"><span class="badge time">2小时</span><span class="badge price">¥150-220（2人）</span></div>
              </div>
            </div>
            <div class="timeline-item">
              <div class="timeline-time">22:00</div>
              <div class="timeline-content">
                <div class="timeline-title">夜宵小食</div>
                <div class="timeline-desc">体验南宁夜生活</div>
                <div class="food-recommendations">
                  <div class="food-item"><strong>八珍粉</strong> - 兴宁路 | 人均¥20-35 | 20:00-2:00</div>
                  <div class="food-item"><strong>烧烤摊</strong> - 中山路夜市 | 人均¥30-50 | 19:00-3:00</div>
                  <div class="food-item"><strong>糖水店</strong> - 解放路 | 人均¥12-20 | 19:00-1:00</div>
                </div>
                <div class="timeline-badges"><span class="badge time">1小时</span><span class="badge price">¥60-100（2人）</span></div>
              </div>
            </div>
          </div>
        </div>
        <div class="day-section">
          <div class="day-header">
            <div class="day-badge">2</div>
            <div class="day-info">
              <h3>南宁深度游（10月3日）</h3>
              <p>青秀山风光，探索绿城文化 | 南宁天气：多云 26-35℃</p>
            </div>
          </div>
          <div class="day-timeline">
            <div class="timeline-item"><div class="timeline-time">11:00</div><div class="timeline-content"><div class="timeline-title">青秀山风景区</div><div class="timeline-desc">南宁市青秀区青山路19号 | 龙象塔、热带雨林大观园 | 门票¥20×2</div><div class="timeline-badges"><span class="badge time">3小时</span><span class="badge price">¥40×2</span></div></div></div>
            <div class="timeline-item"><div class="timeline-time">14:00</div><div class="timeline-content"><div class="timeline-title">景区内午餐</div><div class="timeline-desc">广西特色菜</div><div class="timeline-badges"><span class="badge time">1小时</span><span class="badge price">¥40-60×2</span></div></div></div>
            <div class="timeline-item"><div class="timeline-time">15:30</div><div class="timeline-content"><div class="timeline-title">南湖公园游览</div><div class="timeline-desc">可租船游湖 | 免费开放</div><div class="timeline-badges"><span class="badge time">2小时</span><span class="badge price">¥10-20×2（游船）</span></div></div></div>
            <div class="timeline-item"><div class="timeline-time">17:00</div><div class="timeline-content"><div class="timeline-title">三街两巷历史文化街区</div><div class="timeline-desc">解放路片区 | 免费参观</div><div class="timeline-badges"><span class="badge time">2小时</span><span class="badge price">免费</span></div></div></div>
            <div class="timeline-item"><div class="timeline-time">19:30</div><div class="timeline-content"><div class="timeline-title">晚餐推荐</div><div class="timeline-desc">南宁地道菜肴</div><div class="food-recommendations"><div class="food-item"><strong>绿城食府</strong> - 民族大道 | 人均¥50-80 | 17:00-22:00</div><div class="food-item"><strong>壮乡菜馆</strong> - 青秀区 | 人均¥40-60 | 17:00-22:00</div></div><div class="timeline-badges"><span class="badge time">1.5小时</span><span class="badge price">¥60-90×2</span></div></div></div>
            <div class="timeline-item"><div class="timeline-time">21:30</div><div class="timeline-content"><div class="timeline-title">邕江夜景漫步</div><div class="timeline-desc">江畔夜景散步</div><div class="timeline-badges"><span class="badge time">1小时</span><span class="badge price">免费</span></div></div></div>
          </div>
        </div>
        <div class="day-section">
          <div class="day-header">
            <div class="day-badge">3</div>
            <div class="day-info">
              <h3>南宁→东兴→南宁（10月4日）</h3>
              <p>边境风情，中越边界体验 | 东兴天气：多云 25-32℃</p>
            </div>
          </div>
          <div class="day-timeline">
            <div class="timeline-item"><div class="timeline-time">08:30</div><div class="timeline-content"><div class="timeline-title">南宁 → 东兴</div><div class="timeline-desc">D8301 08:30→10:15 | 南宁站→防城港北站 | 转大巴30分到东兴</div><div class="timeline-badges"><span class="badge time">2.5小时</span><span class="badge price">¥85×2</span></div></div></div>
            <div class="timeline-item"><div class="timeline-time">11:00</div><div class="timeline-content"><div class="timeline-title">东兴国门景区</div><div class="timeline-desc">新华路 | 边境国门拍照 | 门票¥30×2</div><div class="timeline-badges"><span class="badge time">2小时</span><span class="badge price">¥30×2</span></div></div></div>
            <div class="timeline-item"><div class="timeline-time">13:00</div><div class="timeline-content"><div class="timeline-title">海鲜午餐</div><div class="timeline-desc">北部湾海鲜与越南风味</div><div class="food-recommendations"><div class="food-item"><strong>东兴海鲜大排档</strong> - 新华路 | 人均¥60-80 | 11:00-22:00</div><div class="food-item"><strong>越南河粉</strong> - 边贸街 | 人均¥25-35 | 8:00-20:00</div></div><div class="timeline-badges"><span class="badge time">1.5小时</span><span class="badge price">¥60-80×2</span></div></div></div>
            <div class="timeline-item"><div class="timeline-time">14:30</div><div class="timeline-content"><div class="timeline-title">中越边贸街购物</div><div class="timeline-desc">咖啡、腰果、橡胶拖鞋等</div><div class="timeline-badges"><span class="badge time">2小时</span><span class="badge price">¥100-300×2</span></div></div></div>
            <div class="timeline-item"><div class="timeline-time">17:00</div><div class="timeline-content"><div class="timeline-title">东兴 → 南宁</div><div class="timeline-desc">D8310 18:45→20:30 | 先大巴至防城港北站后乘高铁</div><div class="timeline-badges"><span class="badge time">2.5小时</span><span class="badge price">¥85×2</span></div></div></div>
            <div class="timeline-item"><div class="timeline-time">21:00</div><div class="timeline-content"><div class="timeline-title">南宁夜宵</div><div class="timeline-desc">返回南宁后夜宵</div><div class="food-recommendations"><div class="food-item"><strong>老友粉夜宵</strong> - 中山路 | 人均¥20-30 | 20:00-2:00</div></div><div class="timeline-badges"><span class="badge time">1小时</span><span class="badge price">¥20-30×2</span></div></div></div>
          </div>
        </div>
        <div class="day-section">
          <div class="day-header">
            <div class="day-badge">4</div>
            <div class="day-info">
              <h3>南宁→桂林（10月5日）</h3>
              <p>前往山水甲天下的桂林 | 桂林天气：多云 25-33℃</p>
            </div>
          </div>
          <div class="day-timeline">
            <div class="timeline-item"><div class="timeline-time">11:00</div><div class="timeline-content"><div class="timeline-title">南宁 → 桂林</div><div class="timeline-desc">D8268 11:00→12:45 | 二等 | 约1小时45分</div><div class="timeline-badges"><span class="badge time">1小时45分</span><span class="badge price">¥125×2</span></div></div></div>
            <div class="timeline-item"><div class="timeline-time">13:30</div><div class="timeline-content"><div class="timeline-title">办理入住</div><div class="timeline-desc">亚朵（桂林象山公园店） | ¥450-550/晚</div><div class="timeline-badges"><span class="badge time">30分钟</span><span class="badge price">¥450-550/晚</span></div></div></div>
            <div class="timeline-item"><div class="timeline-time">14:30</div><div class="timeline-content"><div class="timeline-title">桂林米粉午餐</div><div class="timeline-desc">崇善/又益轩等</div><div class="food-recommendations"><div class="food-item"><strong>崇善米粉</strong> - 解放西路 | 人均¥15-25 | 6:00-14:00</div><div class="food-item"><strong>又益轩米粉</strong> - 中山中路 | 人均¥12-20 | 6:30-14:00</div></div><div class="timeline-badges"><span class="badge time">1小时</span><span class="badge price">¥20-30×2</span></div></div></div>
            <div class="timeline-item"><div class="timeline-time">16:00</div><div class="timeline-content"><div class="timeline-title">象鼻山公园</div><div class="timeline-desc">桂林地标</div><div class="timeline-badges"><span class="badge time">2小时</span><span class="badge price">¥60×2</span></div></div></div>
            <div class="timeline-item"><div class="timeline-time">18:30</div><div class="timeline-content"><div class="timeline-title">正阳步行街</div><div class="timeline-desc">商业步行街</div><div class="timeline-badges"><span class="badge time">1.5小时</span><span class="badge price">¥50-100×2（购物）</span></div></div></div>
            <div class="timeline-item"><div class="timeline-time">20:30</div><div class="timeline-content"><div class="timeline-title">两江四湖夜游</div><div class="timeline-desc">船游夜景</div><div class="timeline-badges"><span class="badge time">2小时</span><span class="badge price">¥200×2</span></div></div></div>
            <div class="timeline-item"><div class="timeline-time">23:00</div><div class="timeline-content"><div class="timeline-title">桂林特色晚餐</div><div class="timeline-desc">阿甘酒家等</div><div class="food-recommendations"><div class="food-item"><strong>阿甘酒家</strong> - 滨江路 | 人均¥60-80 | 17:00-22:00</div></div><div class="timeline-badges"><span class="badge time">1小时</span><span class="badge price">¥60-80×2</span></div></div></div>
          </div>
        </div>
        <div class="day-section">
          <div class="day-header">
            <div class="day-badge">5</div>
            <div class="day-info">
              <h3>桂林→阳朔→桂林（10月6日）</h3>
              <p>山水画廊，西街风情 | 阳朔天气：多云 25-36℃</p>
            </div>
          </div>
          <div class="day-timeline">
            <div class="timeline-item"><div class="timeline-time">08:00</div><div class="timeline-content"><div class="timeline-title">酒店早餐</div><div class="timeline-desc">出发前补能</div><div class="timeline-badges"><span class="badge time">30分钟</span><span class="badge price">含酒店</span></div></div></div>
            <div class="timeline-item"><div class="timeline-time">09:00</div><div class="timeline-content"><div class="timeline-title">桂林 → 阳朔</div><div class="timeline-desc">桂林汽车总站→阳朔汽车站 | 班车频繁</div><div class="timeline-badges"><span class="badge time">1.5小时</span><span class="badge price">¥25×2</span></div></div></div>
            <div class="timeline-item"><div class="timeline-time">11:00</div><div class="timeline-content"><div class="timeline-title">遇龙河竹筏漂流</div><div class="timeline-desc">金龙桥—工农桥 段约1小时</div><div class="timeline-badges"><span class="badge time">2小时</span><span class="badge price">¥200×2</span></div></div></div>
            <div class="timeline-item"><div class="timeline-time">13:30</div><div class="timeline-content"><div class="timeline-title">阳朔西街午餐</div><div class="timeline-desc">啤酒鱼/田螺酿</div><div class="food-recommendations"><div class="food-item"><strong>大师傅啤酒鱼</strong> - 西街口 | 人均¥45-65 | 11:00-22:00</div><div class="food-item"><strong>阳朔田螺</strong> - 西街夜市 | 人均¥20-30 | 18:00-24:00</div></div><div class="timeline-badges"><span class="badge time">1小时</span><span class="badge price">¥50-70×2</span></div></div></div>
            <div class="timeline-item"><div class="timeline-time">15:00</div><div class="timeline-content"><div class="timeline-title">十里画廊骑行</div><div class="timeline-desc">租电动车欣赏喀斯特地貌</div><div class="timeline-badges"><span class="badge time">2小时</span><span class="badge price">¥30×2</span></div></div></div>
            <div class="timeline-item"><div class="timeline-time">17:30</div><div class="timeline-content"><div class="timeline-title">西街购物 + 休息</div><div class="timeline-desc">购买纪念品</div><div class="timeline-badges"><span class="badge time">1小时</span><span class="badge price">¥50-100×2</span></div></div></div>
            <div class="timeline-item"><div class="timeline-time">19:00</div><div class="timeline-content"><div class="timeline-title">返回桂林</div><div class="timeline-desc">阳朔→桂林汽车总站</div><div class="timeline-badges"><span class="badge time">1.5小时</span><span class="badge price">¥25×2</span></div></div></div>
            <div class="timeline-item"><div class="timeline-time">21:00</div><div class="timeline-content"><div class="timeline-title">桂林晚餐</div><div class="timeline-desc">回桂林享用晚餐</div><div class="timeline-badges"><span class="badge time">1小时</span><span class="badge price">¥40-60×2</span></div></div></div>
          </div>
        </div>
        <div class="day-section">
          <div class="day-header">
            <div class="day-badge">6</div>
            <div class="day-info">
              <h3>桂林→成都（10月7日）</h3>
              <p>购物休闲，桂林机场返程 | 桂林天气：多云 25-33℃</p>
            </div>
          </div>
          <div class="day-timeline">
            <div class="timeline-item"><div class="timeline-time">11:00</div><div class="timeline-content"><div class="timeline-title">市区购物</div><div class="timeline-desc">正阳步行街或微笑堂 | 桂花糕、三花酒、辣椒酱</div><div class="timeline-badges"><span class="badge time">2小时</span><span class="badge price">¥100-200×2</span></div></div></div>
            <div class="timeline-item"><div class="timeline-time">13:30</div><div class="timeline-content"><div class="timeline-title">桂林米粉午餐</div><div class="timeline-desc">最后一碗崇善米粉</div><div class="food-recommendations"><div class="food-item"><strong>崇善米粉</strong> - 解放西路 | 人均¥15-25 | 6:00-14:00</div></div><div class="timeline-badges"><span class="badge time">1小时</span><span class="badge price">¥20-30×2</span></div></div></div>
            <div class="timeline-item"><div class="timeline-time">16:00</div><div class="timeline-content"><div class="timeline-title">市区 → 两江机场</div><div class="timeline-desc">机场大巴约45分 | 建议提前3小时到达</div><div class="timeline-badges"><span class="badge time">1小时</span><span class="badge price">¥30×2</span></div></div></div>
            <div class="timeline-item"><div class="timeline-time">19:50</div><div class="timeline-content"><div class="timeline-title">桂林两江 → 成都天府</div><div class="timeline-desc">CA2738 19:50→21:35 | 飞行约1小时45分 | ¥1130/人</div><div class="timeline-badges"><span class="badge time">1小时45分</span><span class="badge price">¥1130×2</span></div></div></div>
          </div>
      </div>
      </div>
    </section>

    

    

    <!-- 出行建议内容已融合进每日行程备注，不再单独展示 -->

    <footer class="note" style="text-align:center;margin-top:26px;padding:14px;border-top:1px solid var(--line);background:rgba(255,255,255,.92);backdrop-filter:blur(10px);border-radius:12px">
      <span style="color:#0f172a;">地图与坐标：高德POI与公开信息；价格/时段为常见区间，最终以现场与官方为准。</span>
    </footer>
  </main>

  

  <div class="toast" id="toast">已复制</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
<script>
  // H5 安全可用性优化（避免向 classList 添加空字符串导致异常）
  if(/Mobi|Android|iPhone|iPad/i.test(navigator.userAgent)){
    document.documentElement.classList.add('mobile-device');
  }
  // 顶部操作（已移除打印与复制功能）
const toast = document.getElementById('toast');
function showToast(msg){toast.textContent = msg;toast.classList.add('show');setTimeout(()=>toast.classList.remove('show'),1400)}
// simple reveal animation
function inViewReveal(){
  const els = document.querySelectorAll('.fade-in-up');
  const vh = window.innerHeight || document.documentElement.clientHeight;
  els.forEach(el=>{
    const rect = el.getBoundingClientRect();
    if(rect.top < vh - 60){ el.classList.add('in'); }
  })
}
window.addEventListener('scroll', inViewReveal, {passive:true});
window.addEventListener('load', ()=>{
  inViewReveal();
  // smooth anchor enhancement with offset
  document.querySelectorAll('a[href^="#"]').forEach(a=>{
    a.addEventListener('click', (e)=>{
      const target = document.querySelector(a.getAttribute('href'));
      if(target){
        e.preventDefault();
        const top = target.getBoundingClientRect().top + window.pageYOffset - 80;
        window.scrollTo({top, behavior:'smooth'});
      }
    })
  })
  // brand click to top
  const brand = document.getElementById('brandTop');
  if(brand){
    brand.addEventListener('click', ()=>{
      window.scrollTo({top:0, behavior:'smooth'});
    })
  }
});
// ===== Map (Leaflet + OSM) =====
const map = L.map('map', {scrollWheelZoom:true, dragging:true, tap:false, inertia:true}).setView([24.4,109.6], 7);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {maxZoom: 18, attribution: '&copy; OpenStreetMap'}).addTo(map);

// category layers
const layerTraffic = L.featureGroup().addTo(map);
const layerSight = L.featureGroup().addTo(map);
const layerFood = L.featureGroup().addTo(map);
const layerStay = L.featureGroup().addTo(map);

const points = [
  // 南宁
  {name:'南宁吴圩国际机场',lat:22.601718,lon:108.187631,cat:'交通'},
  {name:'南宁站',lat:22.816667,lon:108.316667,cat:'交通'},
  {name:'万象城',lat:22.8206,lon:108.3734,cat:'景点'},
  {name:'中山路美食街',lat:22.816667,lon:108.316667,cat:'美食'},
  {name:'复记老友粉',lat:22.810380,lon:108.324606,cat:'美食'},
  {name:'阿香柠檬鸭',lat:22.810380,lon:108.324606,cat:'美食'},
  {name:'青秀山',lat:22.788660,lon:108.395254,cat:'景点'},
  {name:'南湖公园',lat:22.783333,lon:108.316667,cat:'景点'},
  {name:'三街两巷',lat:22.810380,lon:108.324606,cat:'景点'},
  // 东兴/防城港
  {name:'防城港北站',lat:21.614167,lon:108.353333,cat:'交通'},
  {name:'东兴国门景区',lat:21.540000,lon:107.970000,cat:'景点'},
  {name:'中越边贸街',lat:21.541667,lon:107.971667,cat:'景点'},
  // 桂林/阳朔
  {name:'桂林站',lat:25.316667,lon:110.283333,cat:'交通'},
  {name:'桂林两江国际机场',lat:25.218056,lon:110.039167,cat:'交通'},
  {name:'象鼻山公园',lat:25.274167,lon:110.289167,cat:'景点'},
  {name:'正阳步行街',lat:25.274167,lon:110.289167,cat:'景点'},
  {name:'两江四湖',lat:25.274167,lon:110.289167,cat:'景点'},
  {name:'阳朔汽车站',lat:24.773869,lon:110.493986,cat:'交通'},
  {name:'阳朔西街',lat:24.773869,lon:110.493986,cat:'景点'},
  {name:'十里画廊',lat:24.777530,lon:110.433115,cat:'景点'},
  {name:'遇龙河景区',lat:24.777530,lon:110.433115,cat:'景点'},
  {name:'兴坪古镇',lat:24.916611,lon:110.530606,cat:'景点'}
];
const markers = {};
points.forEach(p=>{
  const m = L.marker([p.lat,p.lon]).bindPopup(`<b>${p.name}</b><br/>类别：${p.cat}`);
  markers[p.name]=m;
  if(p.cat==='交通') layerTraffic.addLayer(m);
  else if(p.cat==='景点') layerSight.addLayer(m);
  else if(p.cat==='美食') layerFood.addLayer(m);
});
// stay areas as circles (可视化住宿区域)
const stays = [
  {name:'南宁万象城片区',lat:22.8206,lon:108.3734,r:1200},
  {name:'桂林正阳步行街片区',lat:25.274167,lon:110.289167,r:1000},
  {name:'阳朔西街片区',lat:24.774,lon:110.494,r:1000}
];
stays.forEach(s=>{
  const c = L.circle([s.lat,s.lon],{radius:s.r,color:'#94a3b8'}).bindPopup(`<b>${s.name}</b>`);
  layerStay.addLayer(c);
});
const allForFit = L.featureGroup([layerTraffic,layerSight,layerFood,layerStay]);
try{ map.fitBounds(allForFit.getBounds().pad(0.2)); }catch(e){}

// filters
function applyFilters(){
  const ft = document.getElementById('filterTraffic');
  const fs = document.getElementById('filterSight');
  const ff = document.getElementById('filterFood');
  const fy = document.getElementById('filterStay');
  if(ft && ft.checked){map.addLayer(layerTraffic)}else{map.removeLayer(layerTraffic)}
  if(fs && fs.checked){map.addLayer(layerSight)}else{map.removeLayer(layerSight)}
  if(ff && ff.checked){map.addLayer(layerFood)}else{map.removeLayer(layerFood)}
  if(fy && fy.checked){map.addLayer(layerStay)}else{map.removeLayer(layerStay)}
}
['filterTraffic','filterSight','filterFood','filterStay'].forEach(id=>{
  const el = document.getElementById(id);
  if(el){ el.addEventListener('change',applyFilters); }
});
applyFilters();

// import custom POI
function importPOI(){
  const txt = document.getElementById('poiInput').value.trim();
  if(!txt){showToast('请输入POI数据');return}
  const lines = txt.split(/\n+/);
  lines.forEach(line=>{
    const [name, lat, lon, cat] = line.split(',').map(s=>s&&s.trim());
    if(!name||!lat||!lon) return;
    const p = {name, lat:parseFloat(lat), lon:parseFloat(lon), cat:cat||'景点'};
    const m = L.marker([p.lat,p.lon]).bindPopup(`<b>${p.name}</b><br/>类别：${p.cat}`);
    markers[p.name]=m;
    if(p.cat==='交通') layerTraffic.addLayer(m);
    else if(p.cat==='美食') layerFood.addLayer(m);
    else if(p.cat==='住宿') layerStay.addLayer(m);
    else layerSight.addLayer(m);
  });
  // 根据当前可见图层自动调整视图
  const fit = [];
  [layerTraffic,layerSight,layerFood,layerStay].forEach(layer=>{
    if(map.hasLayer(layer)){
      layer.eachLayer(l=>fit.push([l.getLatLng().lat,l.getLatLng().lng]));
    }
  })
  if(fit.length){ map.fitBounds(fit); }
}

// 简化：日程项不内置 data-pan，保留地图筛选与自定义POI
// init done
</script>
</body>
</html>
